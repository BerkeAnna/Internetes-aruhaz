create or replace TRIGGER karbantartas
AFTER INSERT ON TERMEK
FOR EACH ROW
DECLARE
    v_id VARCHAR(50);
BEGIN
    SELECT ID INTO v_id FROM ADMIN.ADMIN WHERE FELHASZNALONEV = USER;
    INSERT INTO ADMIN.KARBANTART VALUES(v_id, :NEW.ID, sysdate, 'Sikeres termek felvitel');
END;

create or replace TRIGGER grillsuto_feltoltes
AFTER INSERT ON GRILLSUTO
FOR EACH ROW
BEGIN
    UPDATE ADMIN.KARBANTART SET MEGJEGYZES = 'Grillsuto adatainak sikeres felvitele' WHERE TERMEKID = :NEW.GRILLSUTOTERMEKID;
END;

create or replace TRIGGER telefon_feltoltes
AFTER INSERT ON TELEFON
FOR EACH ROW
BEGIN
    UPDATE ADMIN.KARBANTART SET MEGJEGYZES = 'Telefon adatainak sikeres felvitele' WHERE TERMEKID = :NEW.TELEFONTERMEKID;
END;

create or replace TRIGGER tv_feltoltes
AFTER INSERT ON TV
FOR EACH ROW
BEGIN
    UPDATE ADMIN.KARBANTART SET MEGJEGYZES = 'TV adatainak sikeres felvitele' WHERE TERMEKID = :NEW.TVTERMEKID;
END;

create or replace TRIGGER mosogep_feltoltes
AFTER INSERT ON MOSOGEP
FOR EACH ROW
BEGIN
    UPDATE ADMIN.KARBANTART SET MEGJEGYZES = 'Mosogep adatainak sikeres felvitele' WHERE TERMEKID = :NEW.MOSOGEPTERMEKID;
END;

create or replace TRIGGER kerekpar_feltoltes
AFTER INSERT ON KEREKPAR
FOR EACH ROW
BEGIN
    UPDATE ADMIN.KARBANTART SET MEGJEGYZES = 'Kerekpar adatainak sikeres felvitele' WHERE TERMEKID = :NEW.KEREKPARTERMEKID;
END;

create or replace TRIGGER horgaszbot_feltoltes
AFTER INSERT ON HORGASZBOT
FOR EACH ROW
BEGIN
    UPDATE ADMIN.KARBANTART SET MEGJEGYZES = 'Horgaszbot adatainak sikeres felvitele' WHERE TERMEKID = :NEW.HORGASZBOTTERMEKID;
END;

create or replace TRIGGER parfum_feltoltes
AFTER INSERT ON PARFUM
FOR EACH ROW
BEGIN
    UPDATE ADMIN.KARBANTART SET MEGJEGYZES = 'pARFUM adatainak sikeres felvitele' WHERE TERMEKID = :NEW.PARFUMTERMEKID;
END;

create or replace TRIGGER kosar_figyelo
INSTEAD OF INSERT ON KOSAR2
FOR EACH ROW
DECLARE
    vane NUMBER(5) := 0;
BEGIN
    SELECT COUNT(*) INTO vane FROM KOSAR WHERE VASARLOID = :NEW.VASARLOID AND TERMEKID = :NEW.TERMEKID;

    IF vane != 0 THEN
        UPDATE KOSAR SET MENNYISEG = MENNYISEG+1 WHERE VASARLOID = :NEW.VASARLOID AND TERMEKID = :NEW.TERMEKID;
    ELSE
        INSERT INTO KOSAR VALUES(:NEW.VASARLOID, :NEW.TERMEKID, 1);
    END IF;
END;